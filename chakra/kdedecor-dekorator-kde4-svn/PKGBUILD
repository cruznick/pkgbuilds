# Contributor: Nick B <Shirakawasuna at gmail _dot_com>
# Contributor: Benjamin Mtz (cruznick) <cruznick at archlinux dot us>
pkgname=kdedecor-dekorator-kde4-svn
pkgver=1150140
pkgrel=1
pkgdesc="The dekorator window decoration for KDE 4."
arch=('i686' 'x86_64')
url="http://www.kde-look.org/content/show.php/deKorator?content=87921"
license=('GPL2')
depends=('kdebase-workspace')
makedepends=('cmake' 'automoc4')
conflicts=('kdedecor-dekorator-kde4')
provides=('kdedecor-dekorator-kde4')
source=()
md5sums=()

_svntrunk=svn://anonsvn.kde.org/home/kde/trunk/playground/artwork/dekorator
_svnmod=dekorator

build() {

  cd $srcdir

  if [ -d $_svnmod/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  cp -r $_svnmod $_svnmod-build
  cd $_svnmod-build

  cmake -DCMAKE_INSTALL_PREFIX=/usr ../$_svnmod || return 1
  make || return 1
  make DESTDIR=$pkgdir install || return 1

  rm -r rm -rf $srcdir/$_svnmod-build
}
